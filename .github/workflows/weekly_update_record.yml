on: 
  repository_dispatch:
    types:
      - update_record
jobs:
  run:
    if: github.repository_owner == 'alibabacloud-automation'
    runs-on: ubuntu-latest
    permissions: write-all
    steps:
      - name: checkout
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      - name: update TestRecord
        run: |
          go scripts/update_test_record.go ${{ github.event.client_payload.ossObejctPath }}
          cd .git
          sudo chmod -R a+rwX .
          sudo find . -type d -exec chmod g+s '{}' +
      - name: Commit & Push changes
        uses: actions-js/push@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          message: 'Update TestRecord'
          branch: main